# QRKot

## Описание проекта

Учебный проект для изучения работы во фреймворке FastAPI.

**QRKot** - это API сервиса по сбору средств для финансирования благотворительных проектов. В сервисе реализована возможность регистрации пользователей, добавления благотворительных проектов и пожертвований, которые распределяются по открытым проектам.

Настроено автоматическое создание первого суперпользователя при запуске проекта.

Добавлена возможность формирования отчёта в гугл-таблице. В таблице будут все закрытые проекты, отсортированные по скорости сбора средств — от тех, что закрылись быстрее всего, до тех, что долго собирали нужную сумму.

## Установка и запуск проекта
1. Склонируйте репозиторий:
```
git clone https://github.com/sidelkin1/cat_charity_fund.git
```
2. Активируйте venv и установите зависимости:
```
python -m venv venv
. venv/bin/activate
pip install -r requirements.txt
```
3. Создайте в корневой директории файл `.env`, например, со следующим наполнением:
```
APP_TITLE=Приложение QRKot
APP_DESCRIPTION=Приложение для Благотворительного фонда поддержки котиков QRKot
DATABASE_URL=sqlite+aiosqlite:///./fastapi.db
SECRET=SECRET
FIRST_SUPERUSER_EMAIL=admin@ya.ru
FIRST_SUPERUSER_PASSWORD=admin
TYPE=service_account
PROJECT_ID=PROJECT_ID
PRIVATE_KEY_ID=PRIVATE_KEY_ID
PRIVATE_KEY=PRIVATE_KEY
CLIENT_EMAIL=CLIENT_EMAIL
CLIENT_ID=CLIENT_ID
AUTH_URI=AUTH_URI
TOKEN_URI=TOKEN_URI
AUTH_PROVIDER_X509_CERT_URL=AUTH_PROVIDER_X509_CERT_URL
CLIENT_X509_CERT_URL=CLIENT_X509_CERT_URL
EMAIL=EMAIL
```
4. Примените миграции для создания базы данных `SQLite`:
```
alembic upgrade head
```
5. Запустите проект
```
uvicorn app.main:app
```

## Управление проектом

Сервис будет доступен по следующим адресам:
- http://127.0.0.1:8000 - запросы к `API`
- http://127.0.0.1:8000/docs - автоматически сгенерированная документация `Swagger`
- http://127.0.0.1:8000/redoc - автоматически сгенерированная документация `ReDoc`

После запуска доступны следующие эндпоинты:
- Регистрация и аутентификация:
    - **/auth/register** - регистрация пользователя
    - **/auth/jwt/login** - аутентификация пользователя (получение `jwt`-токена)
    - **/auth/jwt/logout** - выход (сброс `jwt`-токена)
- Пользователи:
    - **/users/me** - получение и изменение данных аутентифицированного пользователя
    - **/users/{id}** - получение и изменение данных пользователя по `id`
- Благотворительные проекты:
    - **/charity_project/** - получение списка проектов и создание нового
    - **/charity_project/{project_id}** - изменение и удаление существующего проекта
- Пожертвования:
    - **/donation/** - получение списка всех пожертвований и создание пожертвования
    - **/donation/my** - получение списка всех пожертвований аутентифицированного пользователя
- Отчет в гугл-таблице
    - **/google/** - формирование отчета в гугл-таблице


## Техническая информация

Стек технологий: Python 3.7, FastAPI 0.78, SQLAlchemy 1.4, Alembic 1.7, Aiogoogle 4.2.

---
## Об авторе

[Константин Сидельников](https://github.com/sidelkin1)